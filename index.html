<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Icy Animations</title> <!-- Title updated to "Animations" -->
    <!-- Favicon: Using a snowflake emoji (‚ùÑÔ∏è) via inline SVG -->
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>‚ùÑÔ∏è</text></svg>">
    
    <!-- Load Tailwind CSS from CDN for instant styling --><script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Link to Inter font from Google Fonts (Universal) --><link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700;800&display=swap" rel="stylesheet">
    
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    // Using Inter first, then falling back to the optimized system font stack (SF Pro, Segoe UI, etc.)
                    fontFamily: {
                        sans: ['Inter', '-apple-system', 'BlinkMacSystemFont', '"Segoe UI"', 'Roboto', '"Helvetica Neue"', 'Arial', 'sans-serif'],
                    },
                }
            }
        }
    </script>
    <style>
        /* Ensures the body fills the entire viewport height and width */
        html, body {
            height: 100%;
            width: 100%;
            margin: 0;
            padding: 0;
            overflow-x: hidden; /* Prevents horizontal scroll on small screens */
        }
        /* Custom CSS for the three-stop gradient: lighter red -> lighter purple -> lighter blue */
        .tri-gradient {
            /* REVERTED: Back to a three-stop gradient: Red -> Blue -> Purple */
            background: linear-gradient(to right, 
                #ef4444 0%,         /* Red-500 */
                #60a5fa 50%,        /* Blue-400 */
                #a78bfa 100%        /* Purple-400 */
            );
            /* --- PARALLAX EFFECT (Option 5) --- */
            background-attachment: fixed;
            background-size: cover;
        }

        /* --- KINETIC HEADER STYLES --- */
        #kinetic-welcome span {
            display: inline-block; /* Essential for individual transforms */
            transition: transform 0.15s ease-out; /* Smooth movement */
            will-change: transform; /* Performance optimization */
        }

        /* --- SNOWFALL EFFECT STYLES --- */
        
        /* Keyframes for the falling animation */
        @keyframes fall {
            0% { top: -10vh; opacity: 0.8; }
            100% { top: 110vh; opacity: 0; } /* INCREASED to 110vh so snowflakes fully exit the bottom */
        }

        /* Keyframes for the spinning animation */
        @keyframes spin {
            from { transform: rotate(0deg); }
            to { transform: rotate(360deg); }
        }

        /* Base style for a single snowflake */
        .snowflake {
            position: fixed;
            /* Color is now dynamic based on emoji, but text-shadow is kept for visibility */
            text-shadow: 0 0 5px rgba(255, 255, 255, 0.5);
            pointer-events: none; /* Allows clicks to pass through */
            user-select: none;
            z-index: 10; 
        }

        /* --- BADGE PULSE STYLES --- */
        @keyframes pulse-light {
            0%, 100% { box-shadow: 0 0 0 0 rgba(255, 255, 255, 0.7); }
            50% { box-shadow: 0 0 0 8px rgba(255, 255, 255, 0); }
        }
        .pulse-badge {
            animation: pulse-light 2s infinite;
        }

        /* --- LOADING SCREEN STYLES (Fancier Update) --- */
        
        /* New keyframe for subtle glow on the snowflake */
        @keyframes subtle-glow {
            0%, 100% { text-shadow: 0 0 8px rgba(255, 255, 255, 0.8); }
            50% { text-shadow: 0 0 16px rgba(186, 230, 253, 1); } /* Light blue glow */
        }
        .loading-snowflake {
            animation: subtle-glow 1.5s ease-in-out infinite;
        }

        #loading-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            /* Frosted glass effect: Dark background with heavy blur */
            background-color: rgba(0, 0, 0, 0.75); 
            backdrop-filter: blur(10px); 
            z-index: 100; 
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            transition: opacity 0.5s ease-out; 
        }
        
        #progress-bar-container {
            width: 80%;
            max-width: 400px;
            background-color: rgba(255, 255, 255, 0.15); /* Lighter container */
            border-radius: 9999px; 
            height: 16px; /* Slightly taller bar */
            overflow: hidden;
            box-shadow: 0 0 10px rgba(255, 255, 255, 0.1);
        }

        #progress-bar {
            height: 100%;
            width: 0%;
            /* Gradient bar: Blue to Purple */
            background: linear-gradient(to right, #60a5fa, #a78bfa); 
            /* Smoother transition */
            transition: width 0.3s cubic-bezier(0.16, 1, 0.3, 1); 
            border-radius: 9999px;
        }
    </style>
</head>
<!-- Applying new layout: flex flex-col min-h-screen ensures the footer is pushed to the bottom -->
<body class="tri-gradient flex flex-col min-h-screen font-sans">

    <!-- 1. LOADING SCREEN (Fancier version) -->
    <div id="loading-screen">
        
        <!-- Snowflake moved to the top of the loading screen -->
        <span class="mb-4 text-5xl loading-snowflake">‚ùÑÔ∏è</span> 
        
        <!-- The process description is now the main title, with smaller text size -->
        <p id="loading-status" class="text-white text-2xl sm:text-3xl font-extrabold mb-8 tracking-wider text-center">Initializing...</p>
        
        <!-- Progress Bar and Percentage below -->
        <div class="flex flex-col items-center justify-center w-full max-w-lg px-4">
            <div id="progress-bar-container" class="mb-4">
                <div id="progress-bar"></div>
            </div>
            
            <p id="loading-percentage" class="text-white text-xl font-bold">0%</p>
        </div>
    </div>

    <!-- 2. MAIN CONTENT WRAPPER (Starts invisible, revealed after loading) -->
    <div id="main-content-wrapper" class="opacity-0 transition-opacity duration-500 flex flex-col min-h-screen w-full">

        <!-- TOP NAVIGATION BAR (Fixed, White Frosted, 45% Opaque / 55% Transparent) -->
        <!-- Background set to bg-white/45 for 45% opacity -->
        <nav class="fixed top-0 left-0 w-full z-50 bg-white/45 backdrop-blur-lg shadow-xl">
            <!-- Center aligns the content using justify-center -->
            <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 flex justify-center items-center py-2">
                
                <!-- Centered Element: Snowflake Emoji and Brand Text -->
                <div class="text-white text-base font-bold flex items-center">
                    <!-- Reduced emoji size to text-xl --><span class="text-xl mr-2">‚ùÑÔ∏è</span>
                    <!-- Updated text to @Icy's Winter Update - Set to text-white for maximum contrast -->
                    <a href="#" class="text-white hover:text-gray-300 transition duration-150 font-bold tracking-wider">@Icy's Winter Update</a>
                </div>
                
            </div>
        </nav>

        <!-- MAIN CONTENT - Added flex-grow to take up remaining vertical space. Increased pt-16 to pt-20. -->
        <main class="pt-20 flex-grow flex flex-col items-center justify-center px-4">
            
            <!-- NEW HERO SECTION: Interactive Welcome Title -->
            <!-- mb-12 reduced to mb-8 -->
            <div class="text-center w-full mb-8">
                <!-- NEW RELEASE DATE TEXT: Small, White, 50% Opacity, and Uppercase -->
                <p class="text-white text-sm font-medium opacity-50 mb-4 tracking-widest uppercase">
                    Official Release on December 22nd
                </p>

                <!-- Container for the kinetic title (text injected by JS) -->
                <h1 id="kinetic-welcome" class="text-3xl sm:text-5xl font-extrabold text-white leading-tight tracking-tight drop-shadow-lg">
                    <!-- Letters will be injected here -->
                </h1>
            </div>
            <!-- END NEW HERO SECTION -->

            <!-- CONTAINER FOR ALL CARDS - ROW 1 (Forsaken & Icy) -->
            <!-- Increased max-w-3xl to max-w-6xl and gap-8 to lg:gap-16 for desktop -->
            <div class="flex flex-col lg:flex-row gap-8 lg:gap-16 max-w-6xl w-full mb-8">
                
                <!-- Forsaken Animations Card (Vibrant Red to Black Gradient) -->
                <a href="https://code-cat12.github.io/animations/forsaken" class="relative flex-1 block 
                    transform hover:scale-[1.03] transition duration-300 ease-in-out 
                    bg-gradient-to-tr from-red-600 to-black rounded-xl overflow-hidden shadow-2xl 
                    hover:shadow-red-900/70 group border border-white/30 
                    focus:ring-4 focus:ring-white/50 focus:outline-none">
                    
                    <!-- NEW BADGE (Option 4) - Now includes pulse-badge class -->
                    <span class="absolute top-2 right-2 px-3 py-1 text-xs font-bold uppercase rounded-full bg-white text-red-600 shadow-md pulse-badge z-20">
                        New
                    </span>

                    <!-- Banner Image (Dynamic Height to fit image content) -->
                    <img src="https://staticg.sportskeeda.com/editor/2025/11/471bd-17619648050568-1920.jpg" 
                        alt="Forsaken Animation Banner"
                        class="w-full object-contain bg-gray-900 group-hover:opacity-85 transition duration-300"
                        onerror="this.onerror=null;this.src='https://placehold.co/768x432/333333/ef4444?text=Forsaken+Animations%3A+Load+Failed';">
                    
                    <div class="p-4 text-center">
                        <p class="text-white text-2xl font-bold tracking-wide drop-shadow-lg mb-1">
                            Forsaken Animations
                        </p>
                        <p class="text-gray-300 text-sm font-light">
                            Explore high-intensity combat choreography and custom rigs.
                        </p>
                    </div>
                </a>

                <!-- Icy Animations Card (Vibrant Blue to Purple Gradient) -->
                <a href="https://code-cat12.github.io/animations/icy/v2/" class="flex-1 block 
                    transform hover:scale-[1.03] transition duration-300 ease-in-out 
                    bg-gradient-to-tr from-blue-500 to-purple-700 rounded-xl overflow-hidden shadow-2xl 
                    hover:shadow-blue-900/70 group border border-white/30
                    focus:ring-4 focus:ring-white/50 focus:outline-none relative">
                    
                    <!-- ADDED UPDATE BADGE - Includes pulse-badge class for consistency -->
                    <span class="absolute top-2 right-2 px-3 py-1 text-xs font-bold uppercase rounded-full bg-white text-blue-600 shadow-md z-20 pulse-badge">
                        Update!
                    </span>

                    <!-- Banner Image (Dynamic Height to fit image content) -->
                    <img src="https://i.postimg.cc/Fzm43475/no-Filter.png" 
                        alt="Icy Animations Banner"
                        class="w-full object-contain bg-gray-900 group-hover:opacity-85 transition duration-300"
                        onerror="this.onerror=null;this.src='https://placehold.co/768x432/4c2f6d/60a5fa?text=Icy+Animations%3A+Load+Failed';">

                    <div class="p-4 text-center">
                        <p class="text-white text-2xl font-bold tracking-wide drop-shadow-lg mb-1">
                            Icy Animations
                        </p>
                        <p class="text-gray-300 text-sm font-light">
                            View seamless, chilling effects and unique character movements.
                        </p>
                    </div>
                </a>
            </div>
            
            <!-- CONTAINER FOR ALL CARDS - ROW 2 (Winter only - adjusted to be centered) -->
            <!-- Increased max-w-3xl to max-w-6xl and gap-8 to lg:gap-16 for desktop -->
            <div class="flex flex-col lg:flex-row gap-8 lg:gap-16 max-w-6xl w-full mb-8">
                
                <!-- Winter Animations Card (Now centered with mx-auto w-full lg:w-1/2, scaled relative to the new max-w-6xl) -->
                <a href="https://code-cat12.github.io/animations/winter" class="relative block mx-auto w-full lg:w-1/2
                    transform hover:scale-[1.03] transition duration-300 ease-in-out
                    /* Card gradient: Teal-to-Yellow */
                    bg-gradient-to-tr from-teal-500 to-yellow-500 rounded-xl overflow-hidden shadow-2xl
                    /* Hover shadow updated to match new gradient */
                    hover:shadow-yellow-700/70 group border border-white/30
                    focus:ring-4 focus:ring-white/50 focus:outline-none">
                    
                    <!-- Badge updated to Limited Time -->
                    <span class="absolute top-2 right-2 px-3 py-1 text-xs font-bold uppercase rounded-full bg-white text-teal-500 shadow-md pulse-badge z-20">
                        Limited Time
                    </span>

                    <!-- Banner Image (Dynamic Height to fit image content) -->
                    <img src="https://pbs.twimg.com/media/G5ozTKLacAIhB-m?format=jpg&name=large"
                        alt="Winter Animations Banner"
                        class="w-full object-contain bg-gray-900 group-hover:opacity-85 transition duration-300"
                        onerror="this.onerror=null;this.src='https://placehold.co/768x432/333366/00cec9?text=Winter+Animations%3A+Load+Failed';">
                    
                    <div class="p-4 text-center">
                        <!-- Title text is white -->
                        <p class="text-white text-2xl font-bold tracking-wide mb-1">
                            Winter Animations
                        </p>
                        <!-- Description text is white -->
                        <p class="text-white text-sm font-light">
                            Seasonal effects including frosty combat and unique holiday character rigs.
                        </p>
                    </div>
                </a>
                
            </div>
            
        </main>
        
        <!-- FOOTER SECTION - Pushed to the bottom by flex-grow on main. -->
        <footer class="w-full py-4 text-center mt-6">
            <!-- Link text changed to Releases and URL updated to the GitHub releases page -->
            <a href="https://github.com/code-cat12/animations/releases" 
               class="text-white hover:text-gray-300 transition duration-200 text-xs font-medium opacity-80 hover:opacity-100 tracking-wider">
                Releases
            </a>
        </footer>
    </div> <!-- END main-content-wrapper -->

    <script>
        // --- KINETIC WELCOME HEADER JAVASCRIPT ---
        function initKineticWelcome() {
            const container = document.getElementById('kinetic-welcome');
            if (!container) return;

            // Reverted text back to "Welcome"
            const text = "Welcome"; 
            const letters = [];

            // 1. Split text into spans
            text.split('').forEach(char => {
                const span = document.createElement('span');
                span.textContent = char === ' ' ? '\u00A0' : char; // Use non-breaking space for actual spaces
                
                // Apply the new red-to-green pastel gradient
                span.classList.add('bg-clip-text', 'text-transparent', 'bg-gradient-to-r', 'from-red-300', 'to-green-300');

                container.appendChild(span);
                letters.push(span);
            });

            // 2. Mouse move handler
            const repulsionStrength = 25; // Reduced from 50 for less movement
            const repulsionRadius = 75;  // Reduced from 100 for a tighter interaction area

            document.addEventListener('mousemove', (e) => {
                letters.forEach(span => {
                    // Get the letter's bounding box and center coordinates
                    const rect = span.getBoundingClientRect();
                    const letterX = rect.left + rect.width / 2;
                    const letterY = rect.top + rect.height / 2;

                    // Calculate distance from mouse to letter's center
                    const dx = e.clientX - letterX;
                    const dy = e.clientY - letterY;
                    const distance = Math.sqrt(dx * dx + dy * dy);

                    let translateY = 0;

                    if (distance < repulsionRadius) {
                        // Calculate the "repulsion" factor (0 to 1)
                        const repulsionFactor = 1 - (distance / repulsionRadius);
                        
                        // Calculate vertical movement:
                        // If mouse is above the letter (dy is negative), move letter down (positive translateY)
                        // If mouse is below the letter (dy is positive), move letter up (negative translateY)
                        const direction = dy > 0 ? -1 : 1;
                        
                        // We scale the repulsion strength based on the proximity and the direction
                        // The effect is to push the letter away from the mouse's Y-position.
                        translateY = direction * repulsionStrength * repulsionFactor;
                    }
                    
                    // Apply the transform
                    span.style.transform = `translateY(${translateY}px)`;
                });
            });
        }
        
        // --- SNOWFALL EFFECT JAVASCRIPT ---
        // DECREASED DENSITY: Initial count now 43, and interval is 700ms
        const initialFlakeCount = 43; 
        
        function createSnowflake(isInitial = false) {
            const snowflake = document.createElement('span');
            snowflake.classList.add('snowflake');
            
            // Re-introducing the 50:50 split of snowflakes and Christmas trees
            const element = Math.random() < 0.5 ? '‚ùÑÔ∏è' : 'üéÑ'; 
            snowflake.innerHTML = element;
            
            // Note: The 'color' style property is no longer set here, relying on emoji default colors.
            
            snowflake.style.left = Math.random() * 100 + 'vw';
            snowflake.style.fontSize = (Math.random() * 0.8 + 1.2) + 'rem'; 
            
            const fallDuration = (Math.random() * 10 + 5).toFixed(2);
            const spinDuration = (Math.random() * 20 + 10).toFixed(2);
            
            let delay = (Math.random() * 5).toFixed(2); 

            if (isInitial) {
                const maxFallDuration = 15;
                delay = -(Math.random() * maxFallDuration).toFixed(2);
            }
            
            snowflake.style.animation = 
                `fall ${fallDuration}s linear infinite, 
                 spin ${spinDuration}s linear infinite`;
            
            snowflake.style.animationDelay = `${delay}s`;
            
            document.body.appendChild(snowflake);
        }

        function initSnowfall() {
            for (let i = 0; i < initialFlakeCount; i++) {
                createSnowflake(true); 
            }
        }

        function startContinuousSnow() {
            // DECREASED DENSITY: New flakes created every 700ms 
            setInterval(() => createSnowflake(false), 700); 
        }


        // --- LOADING SCREEN JAVASCRIPT LOGIC ---

        function updateLoading(progress, status) {
            const progressBar = document.getElementById('progress-bar');
            const loadingPercentage = document.getElementById('loading-percentage');
            const loadingStatus = document.getElementById('loading-status');

            // Ensure progress is clamped between 0 and 100
            const clampedProgress = Math.max(0, Math.min(100, progress));

            progressBar.style.width = `${clampedProgress}%`;
            loadingPercentage.textContent = `${Math.round(clampedProgress)}%`;
            loadingStatus.textContent = status;
        }

        /**
         * Waits for all critical images to load.
         * @param {string[]} imageUrls - Array of image URLs to wait for.
         * @param {number} startProgress - The starting percentage for this loading phase.
         * @param {number} endProgress - The ending percentage for this loading phase.
         * @returns {Promise<void>}
         */
        function waitForImages(imageUrls, startProgress, endProgress) {
            return new Promise(resolve => {
                let loadedCount = 0;
                const totalCount = imageUrls.length;

                if (totalCount === 0) {
                    resolve();
                    return;
                }

                const progressRange = endProgress - startProgress;

                const checkCompletion = () => {
                    loadedCount++;
                    // Map image loading to the specified progress range
                    const progress = Math.floor((loadedCount / totalCount) * progressRange) + startProgress; 
                    // Update status dynamically during image loading
                    updateLoading(progress, `Downloading resources (${loadedCount}/${totalCount})...`);
                    if (loadedCount === totalCount) {
                        resolve();
                    }
                };

                imageUrls.forEach(url => {
                    const img = new Image();
                    img.onload = checkCompletion;
                    img.onerror = checkCompletion; // Count failed loads as complete to prevent hanging
                    img.src = url;
                });
            });
        }

        async function runLoadingSequence() {
            const loadingScreen = document.getElementById('loading-screen');
            const contentWrapper = document.getElementById('main-content-wrapper');

            // Initial Quick Steps (0% to 10%)
            updateLoading(0, 'Establishing secure connection...');
            await new Promise(r => setTimeout(r, 400));
            updateLoading(5, 'Launch sequence initiated.');
            await new Promise(r => setTimeout(r, 200));

            // 1. Collect image URLs from the document
            const imageElements = document.querySelectorAll('main img');
            const imageUrls = Array.from(imageElements)
                                .map(img => img.src)
                                .filter(src => src && !src.includes('placehold.co'));

            // 2. Wait for main images to load (5% - 40%)
            // Status update happens inside waitForImages (e.g., "Downloading resources (1/3)...")
            updateLoading(10, 'Preparing critical media assets...');
            await waitForImages(imageUrls, 10, 40);

            // 3. Simulate granular initialization steps (40% - 99%)
            let currentProgress = 40;
            
            const initializationSteps = [
                { status: 'Running environment compatibility checks...', progressEnd: 48, duration: 200 },
                { status: 'Parsing application configuration files...', progressEnd: 55, duration: 300 },
                { status: 'Calibrating kinetic header repulsion model...', progressEnd: 65, duration: 400 },
                { status: 'Generating unique particle physics map...', progressEnd: 75, duration: 400 },
                { status: 'Rendering initial 3D scene placeholder...', progressEnd: 85, duration: 300 },
                { status: 'Assembling navigation and layout components...', progressEnd: 93, duration: 250 },
                { status: 'Applying final visual polish and theme transitions...', progressEnd: 99, duration: 200 },
            ];
            
            for (const step of initializationSteps) {
                // Update the status immediately before starting the progress sweep
                updateLoading(currentProgress, step.status);
                
                // Smoothly update the progress bar to the step's end point
                const stepsToTake = step.progressEnd - currentProgress;
                if (stepsToTake > 0) {
                    // Calculate a dynamic delay for smooth animation over the duration
                    const delayPerStep = step.duration / stepsToTake;
                    for (let i = currentProgress + 1; i <= step.progressEnd; i++) {
                        // The status text stays the same, but the percentage updates frequently
                        updateLoading(i, step.status);
                        await new Promise(r => setTimeout(r, delayPerStep));
                    }
                }
                currentProgress = step.progressEnd;
            }
            
            // 4. Final initialization and reveal
            updateLoading(100, 'Launch successful. Welcome!');
            
            // Initialize the main components
            initKineticWelcome();
            initSnowfall();
            startContinuousSnow();

            // Give a brief moment before fading out
            await new Promise(r => setTimeout(r, 200));

            // Fade out loading screen and fade in content
            loadingScreen.style.opacity = '0';
            contentWrapper.style.opacity = '1';

            // Remove loading screen after fade
            await new Promise(r => setTimeout(r, 500));
            loadingScreen.remove();
        }

        // Start the loading sequence when the window loads
        window.onload = function () {
            runLoadingSequence(); 
        };
    </script>
</body>
</html>
